# ğŸ”’ Secrets Management Quick Reference

## âš¡ Quick Commands

```bash
# Check if .env is gitignored
git check-ignore .env

# See what's staged
git diff --cached --name-only

# Generate strong secret
python3 -c "import secrets; print(secrets.token_urlsafe(32))"

# Remove file from git (keep locally)
git rm --cached .env

# Search for secrets in git history
git log -p -- docker-compose.yml | grep -i secret
```

## ğŸ“‹ Checklist Before Every Commit

- [ ] Run secret scan (automatic with Claude)
- [ ] All secrets in .env (not in code)
- [ ] .env is gitignored
- [ ] .env.example has placeholders
- [ ] No hardcoded credentials
- [ ] docker-compose.yml uses ${VARIABLES}

## ğŸš¨ If You Find a Secret

1. **Stop** - Don't commit yet
2. **Move** - Put in .env file
3. **Replace** - Use ${VARIABLE} in code
4. **Protect** - Verify .gitignore
5. **Check history** - Was it already committed?
6. **Rotate** - If in git history, rotate the secret

## ğŸ“ File Structure

```
project/
â”œâ”€â”€ .env                    # Real secrets (gitignored)
â”œâ”€â”€ .env.example            # Template (committed)
â”œâ”€â”€ .gitignore              # Must include .env
â”œâ”€â”€ .dockerignore           # Must include .env
â””â”€â”€ docker-compose.yml      # Use ${VARS} only
```

## ğŸ”‘ Secret Types

| Type | Example | Severity |
|------|---------|----------|
| OAuth | `GOCSPX-...` | ğŸ”´ Critical |
| API Key | `sk-...` | ğŸ”´ Critical |
| AWS | `AKIA...` | ğŸ”´ Critical |
| GitHub | `ghp_...` | ğŸ”´ Critical |
| Database | `postgres123` | ğŸŸ¡ Medium |
| Session | `dev-secret` | ğŸŸ¢ Low (rotate for prod) |

## âœ… Secure Pattern

```yaml
# âŒ WRONG - Hardcoded
GOOGLE_CLIENT_SECRET=GOCSPX-abc123xyz789

# âœ… RIGHT - Environment variable
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
```

## ğŸ›¡ï¸ Protection Layers

1. **Claude Skill** - Auto-scans before commit
2. **`.gitignore`** - Prevents committing .env
3. **`.dockerignore`** - Keeps secrets out of images
4. **`.env`** - Centralized secret storage
5. **`.env.example`** - Safe template for team

## ğŸ”„ Rotation Process

If secret was in git history:

1. **Create new** secret (Google Console, AWS, etc.)
2. **Update** .env with new value
3. **Test** application works
4. **Delete** old secret from provider
5. **Monitor** for unauthorized access

## ğŸ“ Emergency Contacts

- **Google OAuth**: console.cloud.google.com
- **AWS**: console.aws.amazon.com/iam
- **GitHub**: github.com/settings/tokens
- **OpenAI**: platform.openai.com/api-keys

## ğŸ’¡ Pro Tips

- Use descriptive env var names
- Add comments in .env explaining each secret
- Never share .env via Slack/email
- Use secrets manager in production (AWS/GCP)
- Review security logs regularly

---

**Remember**: When Claude says "commit", the skill runs automatically! ğŸ”’
